<!DOCTYPE html>

<html lang="en">
{% include 'head.twig' %}
<body>
    {% include 'header.twig' %}

    <ul class="mainMenu">
      <li><a href="connections">Connections</a></li>
      <li class="active"><a href="configurations">Configurations</a></li>
      <li><a href="log">Log</a></li>
      <li><a href="documentation">Documentation</a></li>
    </ul>

    <h2>Edit</h2>
    <p>
        Modifying <em>{{ configName|e}}</em> of user <a href="configurations?userId={{ userId|e }}">{{ userId|e }}</a>.
    </p>
    <h3>Available Pools</h3>
    <table>
        <thead>
            <tr><th>Name</th><th>IPv4 Range</th><th>IPv6 Range</th></tr>
        </thead>
        <tbody>
            {% for key, pool in info.ip.v4.pools %}
            <tr><td>{{ pool.name|e }}</td><td>{{ pool.range|e }}</td><td>{{ info.ip.v6.prefix|e }}{{ pool.range|convert4to6|e }}</td></tr>
            {% endfor %}
        </tbody>
    </table>
    <h3>Modify Configuration</h3>
    <form method="post" action="edit">
        <fieldset>
            <label for="pool">Pool</label>
            <select id="pool" name="pool">
                {% for key, pool in info.ip.v4.pools %}
                    {% if key == config.pool %}
                        <option value="{{ key|e }}" selected="selected">{{ pool.name|e }}</option>
                    {% else %}
                        <option value="{{ key|e }}">{{ pool.name|e }}</option>
                    {% endif %}
                {% endfor %}
            </select>
        </fieldset>
        <fieldset>
            {% if config.disable %}
                <input type="checkbox" name="disable" id="disable" checked="checked"> 
            {% else %}
                <input type="checkbox" name="disable" id="disable"> 
            {% endif %}
            <label for="disable">Disable</label>
        </fieldset>
        <fieldset>
            <p>Clicking "Apply" will disconnect the client if it is currently connected to enforce the new configuration.</p>

            <input type="hidden" name="for_user" value="{{ for_user|e }}">
            <input type="hidden" name="common_name" value="{{ userId|e }}_{{ configName|e}}">
            <button type="submit" value="save">Apply</button>
        </fieldset>
    </form>

    {% include 'footer.twig' %}
</body>
</html>
